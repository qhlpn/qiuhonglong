### CAP

> （大白话）CAP 就是告诉程序员们当分布式系统出现分区问题了，你要做两种选择：
>
> 1. 要么迁就外部服务，像外包公司（可用性）
> 2. 要么让外部服务迁就你，像银行（一致性）

+ **Consistency：数据一致性**

  > 不同的节点均能 **读** 到当下最新数据（要不就写入成功，同步新数据；要不就 **拒绝** 写入（服务不可用），保留当前最新数据）

+ **Availability：可用性**

  > 无论是写还是读，系统能处理请求，并给回响应结果（不管有无脏数据都返回）

+ Tolerance to network **Partitions：分区容忍性**

  > 节点间出现分区问题，无法通信时（网络/宕机），分布式系统继续运行（容忍）

> 误解一：分布式系统因为 CAP 定理放弃了 C 或者 A 中的其中一个。
> 			   **当没有出现分区问题的时候，系统就应该有完美的数据一致性和可用性** ✔
>
> 误解二：C 和 A 之间的选择是针对整个分布式系统的
>               **当分区发生的时候，对一致性和可用性的抉择是局部性的（支付系统：账务流水是C，支付功能是A）**



### BASE

> （大白话）俗称 **柔性** 事务，互联网分布式系统都强调 **可用性 A**，在此基础上，由 CAP 可知无法满足 **数据一致性 C**，因此 C 和 A 分别做出让步，即 **基本可用** 和 **数据软状态** 。

+ **B**asically **A**vailable **基本可用**：允许页面降级、接口延迟
+ **S**oft yustate **软状态**：允许数据存在中间状态（副本同步有时延）
+ **E**ventually consistent **最终一致性**：在软状态期限后，最终各副本数据要一致